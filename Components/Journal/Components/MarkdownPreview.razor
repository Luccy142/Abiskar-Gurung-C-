@namespace JournalApp.Components.Journal.Components
@using Microsoft.AspNetCore.Components

@if (!string.IsNullOrWhiteSpace(Content))
{
    <div style="border:1px solid #ccc; padding:10px; border-radius:6px;">
        @((MarkupString)RenderedHtml)
    </div>
}

@code {
    [Parameter] public string? Content { get; set; }

    private string RenderedHtml => ConvertMarkdown(Content ?? string.Empty);

    private string ConvertMarkdown(string text)
    {
        var html = text;

        // Headings
        html = System.Text.RegularExpressions.Regex.Replace(html, @"^### (.*)$", "<h3>$1</h3>", System.Text.RegularExpressions.RegexOptions.Multiline);
        html = System.Text.RegularExpressions.Regex.Replace(html, @"^## (.*)$", "<h2>$1</h2>", System.Text.RegularExpressions.RegexOptions.Multiline);
        html = System.Text.RegularExpressions.Regex.Replace(html, @"^# (.*)$", "<h1>$1</h1>", System.Text.RegularExpressions.RegexOptions.Multiline);

        // Bold **text**
        html = System.Text.RegularExpressions.Regex.Replace(html, @"\*\*(.*?)\*\*", "<b>$1</b>");

        // Italic *text*
        html = System.Text.RegularExpressions.Regex.Replace(html, @"\*(.*?)\*", "<i>$1</i>");

        // Line breaks
        html = html.Replace("\n", "<br/>");

        return html;
    }
}
